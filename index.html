<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>„Éë„ÉÅ„É≥„Ç≥</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRAGLrjEeqNmwwVpY-esZAxZMNgZK23-DPXt7zK1romRg&s=10" sizes="16√ó16" type="image/png" />  
<style>
body{margin:0;background:#020617;color:#fff;font-family:sans-serif;text-align:center;}
header{padding:10px;font-size:18px;font-weight:bold;}
#game{position:relative;margin:0 auto;max-width:420px;height:640px;
 background:#020617;border:3px solid #38bdf8;border-radius:12px;overflow:hidden;}
canvas{display:block;}
#ui{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;padding:8px;}
button,input,select{padding:8px;font-size:14px;border:none;border-radius:8px;}
button{background:#38bdf8;color:#000;font-weight:bold;}
#status{width:100%;font-size:14px;}
#lever{position:absolute;right:10px;bottom:60px;width:40px;height:160px;background:#334155;border-radius:20px;}
#leverKnob{position:absolute;left:50%;transform:translateX(-50%);
 width:50px;height:50px;background:#facc15;border-radius:50%;top:0;touch-action:none;}
#bigWin{position:absolute;inset:0;display:none;align-items:center;justify-content:center;
 background:rgba(0,0,0,.85);z-index:5;}
#bigWin span{font-size:42px;color:#facc15;font-weight:bold;
 animation:zoom 1s infinite alternate;}
@keyframes zoom{from{transform:scale(1);}to{transform:scale(1.25);}}
#rain{position:absolute;inset:0;pointer-events:none;z-index:6;}
   footer {
           padding: 30px;
           text-align: center;
           font-size: 0.85rem;
           color: rgba(255,255,255,0.5);
           border-top: 1px solid rgba(255,255,255,0.1);
           margin-top: 60px;
   }
</style>
</head>
<body>

<header>„Éë„ÉÅ„É≥„Ç≥</header>

<div id="game">
  <canvas id="c" width="420" height="640"></canvas>
  <canvas id="rain" width="420" height="640"></canvas>
  <div id="lever"><div id="leverKnob"></div></div>
  <div id="bigWin"><span>üéâ Â§ßÂΩì„Åü„ÇäÔºÅ üéâ</span></div>
</div>

<div id="ui">
  <div id="status">Áéâ:<span id="balls">100</span></div>
  <button id="shot">Áô∫Â∞Ñ</button>
  <button id="bgmBtn">BGM ON</button>
  <button id="fsBtn">FULL</button>
  <select id="stageSel">
    <option value="normal">„Éé„Éº„Éû„É´</option>
    <option value="fire">„Éï„Ç°„Ç§„Ç¢</option>
    <option value="night">„Éä„Ç§„Éà</option>
  </select>
</div>
    <footer>
       ¬© 2025 GAMEHUB - All Rights Reserved.
   </footer>


<script>
/* ===== Canvas ===== */
const c=document.getElementById("c"),ctx=c.getContext("2d");
const rain=document.getElementById("rain"),rctx=rain.getContext("2d");

/* ===== State ===== */
let balls=100,ballList=[];
let gravity=0.22,canShoot=true;
let zone={x:200,y:520,w:30,h:22,vx:1.6,vy:0.8,vis:true,t:0};
const ballsEl=document.getElementById("balls");

/* ===== Stages ===== */
const stages={
 normal:{bg:"#020617",pin:"#94a3b8"},
 fire:{bg:"#3b0a0a",pin:"#fb7185"},
 night:{bg:"#020617",pin:"#38bdf8"}
};
let stage="normal";

/* ===== BGM (WebAudio) ===== */
let audioCtx,osc,bgmOn=false;
function toggleBGM(){
 if(!audioCtx) audioCtx=new AudioContext();
 if(!bgmOn){
  osc=audioCtx.createOscillator();
  osc.type="sine"; osc.frequency.value=180;
  osc.connect(audioCtx.destination); osc.start();
  bgmOn=true; bgmBtn.textContent="BGM OFF";
 }else{
  osc.stop(); bgmOn=false; bgmBtn.textContent="BGM ON";
 }
}
bgmBtn.onclick=toggleBGM;

/* ===== Fullscreen ===== */
fsBtn.onclick=()=>{
 if(!document.fullscreenElement) game.requestFullscreen();
 else document.exitFullscreen();
};

/* ===== Shooting ===== */
function shoot(){
 if(!canShoot||balls<=0) return;
 canShoot=false; setTimeout(()=>canShoot=true,600);
 balls--; ballsEl.textContent=balls;
 ballList.push({x:210,y:40,vx:(Math.random()-.5)*2,vy:2,hit:false});
}
shot.onclick=shoot;

/* ===== Lever ===== */
const knob=document.getElementById("leverKnob");
let drag=false,sy=0;
knob.onpointerdown=e=>{drag=true;sy=e.clientY;}
onpointerup=()=>{
 if(!drag) return;
 shoot(); knob.style.top="0"; drag=false;
}
onpointermove=e=>{
 if(drag) knob.style.top=Math.min(100,Math.max(0,e.clientY-sy))+"px";
};

/* ===== Stage ===== */
stageSel.onchange=()=>stage=stageSel.value;

/* ===== BigWin ===== */
function bigWin(){
 document.getElementById("bigWin").style.display="flex";
 balls+=50; ballsEl.textContent=balls;
 setTimeout(()=>bigWin.style.display="none",2000);
}

/* ===== Loop ===== */
function update(){
 zone.t++; if(zone.t%180===0) zone.vis=!zone.vis;
 if(zone.vis){
  zone.x+=zone.vx; zone.y+=zone.vy;
  if(zone.x<60||zone.x+zone.w>360) zone.vx*=-1;
  if(zone.y<480||zone.y+zone.h>580) zone.vy*=-1;
 }

 ctx.fillStyle=stages[stage].bg;
 ctx.fillRect(0,0,420,640);

 if(zone.vis){
  ctx.fillStyle="rgba(250,204,21,.3)";
  ctx.fillRect(zone.x,zone.y,zone.w,zone.h);
  ctx.strokeStyle="#facc15";ctx.lineWidth=3;
  ctx.strokeRect(zone.x,zone.y,zone.w,zone.h);
 }

 ctx.fillStyle="#e5e7eb";
 ballList.forEach(b=>{
  b.vy+=gravity;b.x+=b.vx;b.y+=b.vy;
  if(!b.hit && zone.vis &&
     b.x>zone.x&&b.x<zone.x+zone.w &&
     b.y>zone.y&&b.y<zone.y+zone.h){
     b.hit=true; bigWin(); b.y=700;
  }
  ctx.beginPath();ctx.arc(b.x,b.y,4,0,Math.PI*2);ctx.fill();
 });
 ballList=ballList.filter(b=>b.y<660);
 requestAnimationFrame(update);
}
update();
</script>
</body>
</html>
